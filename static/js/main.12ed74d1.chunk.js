(this["webpackJsonpsneakers-react"]=this["webpackJsonpsneakers-react"]||[]).push([[0],{21:function(e,t,a){e.exports={card:"styles_card__j_quF",plus:"styles_plus__1Oal8",favourite:"styles_favourite__289f0"}},22:function(e,t,a){e.exports={overlay:"styles_overlay__1en4M",drawer:"styles_drawer__1Y2uc",overlayVisible:"styles_overlayVisible__1tbTd"}},42:function(e,t,a){},44:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a.n(c),s=a(34),n=a.n(s),i=(a(42),a(11)),o=a(5),l=a.n(o),j=a(14),d=a(12),u=a(4),b=(a(44),a(45),a(2)),x=a(6),h=a.n(x),m=a(21),f=a.n(m),p=a(35),O=r.a.createContext({}),v=a(1);var g=function(e){var t=e.id,a=e.name,r=e.image,s=e.price,n=e.onFavourite,i=e.onAddToCart,o=e.favourite,l=void 0!==o&&o,j=e.isLoading,d=Object(c.useContext)(O).isItemAdded,b=Object(c.useState)(l),x=Object(u.a)(b,2),h=x[0],m=x[1],g={id:t,parentId:t,name:a,image:r,price:s};return Object(v.jsx)("div",{className:f.a.card,children:j?Object(v.jsxs)(p.a,{speed:2,width:150,height:265,viewBox:"0 0 150 265",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[Object(v.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"150",height:"90"}),Object(v.jsx)("rect",{x:"0",y:"101",rx:"5",ry:"5",width:"150",height:"15"}),Object(v.jsx)("rect",{x:"0",y:"130",rx:"5",ry:"5",width:"78",height:"15"}),Object(v.jsx)("rect",{x:"0",y:"159",rx:"5",ry:"5",width:"78",height:"15"}),Object(v.jsx)("rect",{x:"96",y:"134",rx:"5",ry:"5",width:"48",height:"38"})]}):Object(v.jsxs)(v.Fragment,{children:[n&&Object(v.jsx)("div",{className:f.a.favourite,children:Object(v.jsx)("img",{onClick:function(){n(g),m(!h)},src:h?"images/heartRed.png":"images/heartWhite.svg",alt:"like"})}),Object(v.jsx)("img",{src:r,width:133,height:112,alt:""}),Object(v.jsx)("h5",{children:a}),Object(v.jsxs)("div",{className:"d-flex justify-between align-center",children:[Object(v.jsxs)("div",{className:"d-flex flex-column",children:[Object(v.jsx)("span",{children:"Price:"}),Object(v.jsxs)("b",{children:["\xa3",s]})]}),i&&Object(v.jsx)("img",{className:f.a.plus,onClick:function(){i(g)},src:d(t)?"images/arrowGreen.svg":"images/plus.svg",alt:"add "})]})]})})};var k=function(e){var t=e.onChangeSearchInput,a=e.searchValue,c=e.setSearchValue,r=e.items,s=e.onAddToCart,n=e.onAddToFavorites,o=e.isLoading;return Object(v.jsxs)("div",{className:"content p-40",children:[Object(v.jsxs)("div",{className:"mb-40 d-flex align-center justify-between",children:[Object(v.jsx)("h1",{children:"All sneakers"}),Object(v.jsxs)("div",{className:"search-block d-flex",children:[Object(v.jsx)("img",{src:"images/search.svg",alt:"search"}),Object(v.jsx)("input",{onChange:t,type:"text",placeholder:"Search...",value:a}),a&&Object(v.jsx)("img",{onClick:function(){c("")},className:"clear cu-p",src:"/images/buttonRemove.svg",alt:""})]})]}),Object(v.jsx)("div",{className:"d-flex flex-wrap",children:(o?Object(j.a)(Array(4)):r.filter((function(e){return e.name.toLowerCase().includes(a)}))).map((function(e,t){return Object(v.jsx)(g,Object(i.a)(Object(i.a)({isLoading:o},e),{},{onFavourite:function(e){n(e)},onAddToCart:function(e){s(e)}}),t)}))})]})};var y=function(){var e=Object(c.useContext)(O),t=e.favouriteItems,a=e.onAddToFavorites;return Object(v.jsxs)("div",{className:"content p-40",children:[Object(v.jsx)("div",{className:"mb-40 d-flex align-center justify-between",children:Object(v.jsx)("h1",{children:"My Favourites"})}),Object(v.jsx)("div",{className:"d-flex flex-wrap",children:t.map((function(e,t){return Object(v.jsx)(g,Object(i.a)(Object(i.a)({},e),{},{favourite:!0,onFavourite:a}),t)}))})]})};var w=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(!0),o=Object(u.a)(n,2),b=o[0],x=o[1];return r.a.useEffect((function(){try{Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("https://615ee75faf36590017204644.mockapi.io/orders");case 2:t=e.sent,a=t.data,s(a.map((function(e){return e.items})).flat()),x(!1);case 6:case"end":return e.stop()}}),e)})))()}catch(e){console.log("Error happend")}}),[]),Object(v.jsxs)("div",{className:"content p-40",children:[Object(v.jsx)("div",{className:"mb-40 d-flex align-center justify-between",children:Object(v.jsx)("h1",{children:"My orders"})}),Object(v.jsx)("div",{className:"d-flex flex-wrap",children:(b?Object(j.a)(Array(4)):a).map((function(e,t){return Object(v.jsx)(g,Object(i.a)({isLoading:b},e),t)}))})]})},N=a(13),C=function(){var e=Object(c.useContext)(O),t=e.cartItems,a=e.setCartItems,r=t.reduce((function(e,t){return+t.price+e}),0);return{cartItems:t,setCartItems:a,totalPrice:r}};var I=function(e){var t=e.onCartClick,a=C().totalPrice;return Object(v.jsxs)("header",{className:"d-flex justify-between align-center p-40",children:[Object(v.jsx)(N.b,{to:"/",children:Object(v.jsxs)("div",{className:"d-flex align-center",children:[Object(v.jsx)("img",{src:"images/logo.png",alt:"logo",width:40,height:40}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{className:"text-uppercase",children:"React sneakers"}),Object(v.jsx)("p",{className:"opacity-5",children:"Best sneakers store"})]})]})}),Object(v.jsxs)("ul",{className:"d-flex",children:[Object(v.jsxs)("li",{className:"mr-30 cu-p",onClick:t,children:[Object(v.jsx)("img",{src:"images/cart.svg",alt:"logo",width:18,height:18}),Object(v.jsxs)("span",{children:[a,"\xa3"]})]}),Object(v.jsx)("li",{className:"mr-20 cu-p",children:Object(v.jsx)(N.b,{to:"/favourites",children:Object(v.jsx)("img",{src:"images/favourites.svg",alt:"favourites",width:18,height:18})})}),Object(v.jsx)("li",{children:Object(v.jsx)(N.b,{to:"/orders",children:Object(v.jsx)("img",{src:"images/user.svg",alt:"user",width:18,height:18})})})]})]})},_=a(22),S=a.n(_),T=function(e){e.orderId;var t=e.image,a=e.title,c=e.description,s=r.a.useContext(O).setIsCartOpened;return Object(v.jsxs)("div",{className:"cartEmpty d-flex align-center justify-center flex-column flex",children:[Object(v.jsx)("img",{className:"mb-20",src:t,width:"120px",alt:"empty basket"}),Object(v.jsx)("h2",{children:a}),Object(v.jsx)("p",{className:"opacity-6",children:c}),Object(v.jsxs)("button",{className:"btnGreen",onClick:function(){s(!1)},children:[Object(v.jsx)("img",{src:"images/arrowBack.svg",alt:"back"}),"Back"]})]})};var A=function(e){var t=e.onRemove,a=e.items,r=void 0===a?[]:a,s=e.opened,n=C(),i=n.cartItems,o=n.setCartItems,j=n.totalPrice,b=Object(c.useContext)(O).setIsCartOpened,x=Object(c.useState)(!1),m=Object(u.a)(x,2),f=m[0],p=m[1],g=Object(c.useState)(null),k=Object(u.a)(g,2),y=k[0],w=k[1],N=function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("https://615ee75faf36590017204644.mockapi.io/orders",{items:i});case 3:t=e.sent,a=t.data,w(a.id),p(!0),o([]),c=0;case 9:if(!(c<i.length)){e.next=18;break}return r=i[c],e.next=13,h.a.delete("https://615ee75faf36590017204644.mockapi.io/cart/"+r.id);case 13:return e.next=15,new Promise((function(e){return setTimeout(e,1e3)}));case 15:c++,e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"".concat(S.a.overlay," ").concat(s?S.a.overlayVisible:""),children:Object(v.jsxs)("div",{className:S.a.drawer,children:[Object(v.jsxs)("h2",{className:"mb-30 d-flex justify-between ",children:["Basket",Object(v.jsx)("img",{onClick:function(){b(!1)},className:"removeBtn cu-p",src:"images/buttonRemove.svg",alt:"close"})]}),r.length?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"items",children:r.map((function(e){var a=e.image,c=e.name,r=e.price,s=e.id;return Object(v.jsxs)("div",{className:"cartItem d-flex align-center mb-20",children:[Object(v.jsx)("img",{className:"mr-20",src:a,width:70,height:70,alt:"Sneakers "}),Object(v.jsxs)("div",{className:"mr-20",children:[Object(v.jsx)("p",{className:"mb-5",children:c}),Object(v.jsxs)("b",{children:["\xa3",r]})]}),Object(v.jsx)("img",{onClick:function(){t(s)},className:"removeBtn",src:"/images/buttonRemove.svg",alt:"delete"})]},s)}))}),Object(v.jsxs)("div",{className:"cartTotal",children:[Object(v.jsxs)("ul",{className:"cartTotal",children:[Object(v.jsxs)("li",{className:"d-flex",children:[Object(v.jsx)("span",{children:"Total"}),Object(v.jsx)("div",{}),Object(v.jsxs)("b",{children:["\xa3",j]})]}),Object(v.jsxs)("li",{className:"d-flex",children:[Object(v.jsx)("span",{children:"Tax 5%"}),Object(v.jsx)("div",{}),Object(v.jsxs)("b",{children:["\xa3",j/100*5]})]})]}),Object(v.jsxs)("button",{onClick:N,className:"btnGreen",children:["Order ",Object(v.jsx)("img",{src:"/images/arrowRight.svg",alt:"arrow"})]})]})]}):Object(v.jsx)(T,{orderId:y,title:f?"Order completed":"Cart is empty",description:f?"Your order #".concat(y," is proccessing and will be delivered soon"):"Please add items to basket",image:f?"/images/complete.jpg":"images/empty.png"})]})})};var F=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)([]),n=Object(u.a)(s,2),o=n[0],x=n[1],m=Object(c.useState)(""),f=Object(u.a)(m,2),p=f[0],g=f[1],N=Object(c.useState)([]),C=Object(u.a)(N,2),_=C[0],S=C[1],T=Object(c.useState)([]),F=Object(u.a)(T,2),B=F[0],P=F[1],R=Object(c.useState)(!0),V=Object(u.a)(R,2),E=V[0],L=V[1],M=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!B.find((function(e){return e.id===t.id}))){e.next=6;break}h.a.delete("https://615ee75faf36590017204644.mockapi.io/favourites/".concat(t.id)),P((function(e){return e.filter((function(e){return e.id!==t.id}))})),e.next=11;break;case 6:return e.next=8,h.a.post("https://615ee75faf36590017204644.mockapi.io/favourites",t);case 8:a=e.sent,c=a.data,P((function(e){return[].concat(Object(j.a)(e),[c])}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("There is an error");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=_.find((function(e){return e.parentId===t.id})))){e.next=8;break}return S((function(e){return e.filter((function(e){return e.parentId!==t.id}))})),e.next=6,h.a.delete("https://615ee75faf36590017204644.mockapi.io/cart/".concat(a.id));case 6:e.next=14;break;case 8:return S((function(e){return[].concat(Object(j.a)(e),[t])})),e.next=11,h.a.post("https://615ee75faf36590017204644.mockapi.io/cart",t);case 11:c=e.sent,r=c.data,S((function(e){return e.map((function(e){return e.parentId===r.parentId?Object(i.a)(Object(i.a)({},e),{},{id:r.id}):e}))}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("error happened");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{h.a.delete("https://615ee75faf36590017204644.mockapi.io/cart/".concat(t)),S((function(e){return e.filter((function(e){return+e.id!==+t}))}))}catch(a){console.log("error happened")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,a,c,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([h.a.get("https://615ee75faf36590017204644.mockapi.io/cart"),h.a.get("https://615ee75faf36590017204644.mockapi.io/cart"),h.a.get("https://615ee75faf36590017204644.mockapi.io/items")]);case 3:t=e.sent,a=Object(u.a)(t,3),c=a[0],r=a[1],s=a[2],L(!1),S(c.data),P(r.data),x(s.data),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("Error happened");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(v.jsx)(O.Provider,{value:{items:o,cartItems:_,favouriteItems:B,isItemAdded:function(e){return _.some((function(t){return t.parentId===e}))},onAddToFavorites:M,setIsCartOpened:r,setCartItems:S},children:Object(v.jsxs)("div",{className:"wrapper clear",children:[Object(v.jsx)(A,{onRemove:J,items:_,opened:a}),Object(v.jsx)(I,{onCartClick:function(){r(!0)}}),Object(v.jsx)(b.a,{path:"",exact:!0,children:Object(v.jsx)(k,{cartItems:_,onChangeSearchInput:function(e){g(e.target.value)},searchValue:p,setSearchValue:g,items:o,onAddToCart:G,onAddToFavorites:M,isLoading:E})}),Object(v.jsx)(b.a,{path:"favourites",exact:!0,children:Object(v.jsx)(y,{})}),Object(v.jsx)(b.a,{path:"orders",exact:!0,children:Object(v.jsx)(w,{})})]})})};n.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(N.a,{basename:"/",children:Object(v.jsx)(F,{})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.12ed74d1.chunk.js.map